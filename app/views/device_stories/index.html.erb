<%= content_for(:title) { "Device Stories" } %>

<h2>Device Stories</h2>
<div class="well">
  <div style="float: left; display: inline-block"> <%= number_with_delimiter @device_stories.total_count %> <%= t('.results') %>. &#160<br>Searching for: <%= @search_term %></div>

  <!-- SEARCH BAR! -->

  <%= form_tag(device_stories_path, :method => "get",
               class: 'navbar-form navbar-left') do %>
    <div class="input-group" style = "float: right">
      <%= search_field_tag :search, params[:search], placeholder: "Search", class: "form-control" %>
    </div>
  <% end %>

</div>
<%- if @device_stories.empty? -%>
  <p><%= t(".none_found") -%></p>
<%- else -%>
  <table class="table table-hover" data-provides="rowlink">
    <thead>
      <%= table_sort_header(:device, :device_urn) %>
      <%= table_sort_header(:device, :custodian_name) %>
      <%= table_sort_header(:device, :last_values) %>
      <%= table_sort_header(:device, :last_location_name) %>
      <%= table_sort_header(:device, :last_seen) %>
    </thead>
    <tbody>
      <%- @device_stories.each do |device_story| -%>
        <tr>
          <td><%= link_to device_story.device_urn, device_story %></td>
          <td><%= device_story.custodian_name %></td>
          <td><%= device_story.last_values %></td>
          <td><%= device_story.last_location_name %></td>
          <td><%= device_story.last_seen %></td>
        </tr>
      <%- end -%>
    </tbody>
  </table>
  <%= paginate @device_stories, theme: 'twitter-bootstrap-2' -%>
<%- end -%>

<div class="spacer"></div>
<%= current_page_api_example :device_stories_url %>
